{"ast":null,"code":"import _objectWithoutProperties from\"/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _regeneratorRuntime from\"/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _excluded=[\"listId\",\"cardId\"],_excluded2=[\"listId\",\"cardIndex\"];import React,{useState}from\"react\";import ReactDOMServer from\"react-dom/server\";import Swal from\"sweetalert2\";import withReactContent from\"sweetalert2-react-content\";import{DragDropContext,Droppable,Draggable}from\"react-beautiful-dnd\";import{Col,Row,Button,Container}from\"react-bootstrap\";import KanbanHeader from\"components/KanbanHeader\";import KanbanList from\"components/KanbanList\";import KanbanCard from\"components/KanbanCard\";import{KanbanCreateModal,KanbanEditModal,KanbanCopyModal,KanbanMoveModal,KanbanEditMembersModal,KanbanEditLabelsModal}from\"components/Modals\";import KANBAN_LISTS,{createCard,createList}from\"data/kanban\";import{ArchiveIcon,PlusIcon}from\"@heroicons/react/solid\";var ArchiveIconHtml=ReactDOMServer.renderToString(/*#__PURE__*/React.createElement(ArchiveIcon,{className:\"h-50 w-auto\"}));var SwalWithBootstrapButtons=withReactContent(Swal.mixin({customClass:{confirmButton:\"btn btn-primary me-3\",cancelButton:\"btn btn-gray\"},buttonsStyling:false}));export default(function(){var _useState=useState(KANBAN_LISTS),_useState2=_slicedToArray(_useState,2),kanbanLists=_useState2[0],setKanbanLists=_useState2[1];var createCardDefaultProps={listId:kanbanLists[0].id,cardIndex:0};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCreateCardModal=_useState4[0],setShowCreateCardModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showCreateListModal=_useState6[0],setShowCreateListModal=_useState6[1];var _useState7=useState(createCardDefaultProps),_useState8=_slicedToArray(_useState7,2),createCardProps=_useState8[0],setCreateCardProps=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),cardToEdit=_useState10[0],setCardToEdit=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),cardToCopy=_useState12[0],setCardToCopy=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),cardToMove=_useState14[0],setCardToMove=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),cardToChangeMembers=_useState16[0],setCardToChangeMembers=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),cardToChangeLabels=_useState18[0],setCardToChangeLabels=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),listToCopy=_useState20[0],setListToCopy=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),listToMoveIndex=_useState22[0],setListToMoveIndex=_useState22[1];var toggleCreateListModal=function toggleCreateListModal(){setShowCreateListModal(!showCreateListModal);};var toggleCreateCardModal=function toggleCreateCardModal(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};setCreateCardProps(_objectSpread(_objectSpread({},createCardDefaultProps),props));setShowCreateCardModal(!showCreateCardModal);};var getCardStyle=function getCardStyle(style,snapshot){var isJustDragging=snapshot.isDragging&&!snapshot.isDropAnimating;if(!isJustDragging){return style;}return _objectSpread(_objectSpread({},style),{},{transform:\"\".concat(style.transform||\"\",\" rotate(6deg)\")});};var handleCreateCard=function handleCreateCard(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var listsUpdated=createCardInListAtIndex(_objectSpread(_objectSpread({},createCardProps),props));toggleCreateCardModal();setKanbanLists(listsUpdated);};var handleCopyCard=function handleCopyCard(){var card=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var listId=card.listId,title=card.title,description=card.description;var listsUpdated=createCardInListAtIndex({listId:listId,title:title,description:description});setCardToCopy(null);setKanbanLists(listsUpdated);};var handleMoveList=function handleMoveList(_ref){var source=_ref.source,destination=_ref.destination;var lists=_toConsumableArray(kanbanLists);var _lists$splice=lists.splice(source.index,1),_lists$splice2=_slicedToArray(_lists$splice,1),listRemoved=_lists$splice2[0];lists.splice(destination.index,0,listRemoved);setKanbanLists(lists);setListToMoveIndex(null);};var handleCreateList=function handleCreateList(props){var newList=createList(props);var listsUpdated=[].concat(_toConsumableArray(kanbanLists),[newList]);setShowCreateListModal(false);setKanbanLists(listsUpdated);setListToCopy(null);};var reorderCards=function reorderCards(){var cards=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var startIndex=arguments.length>1?arguments[1]:undefined;var endIndex=arguments.length>2?arguments[2]:undefined;var _cards$splice=cards.splice(startIndex,1),_cards$splice2=_slicedToArray(_cards$splice,1),cardRemoved=_cards$splice2[0];cards.splice(endIndex,0,cardRemoved);return cards;};var moveCardFromList=function moveCardFromList(sList,dList,sIndex,dIndex){var sCards=_toConsumableArray(sList.cards);var dCards=_toConsumableArray(dList.cards);var _sCards$splice=sCards.splice(sIndex,1),_sCards$splice2=_slicedToArray(_sCards$splice,1),cardRemoved=_sCards$splice2[0];dCards.splice(dIndex,0,cardRemoved);return[_objectSpread(_objectSpread({},sList),{},{cards:sCards}),_objectSpread(_objectSpread({},dList),{},{cards:dCards})];};var handleDragEnd=function handleDragEnd(dragResult){var source=dragResult.source,destination=dragResult.destination;//  dropped outside the list\nif(!destination){return;}var sListId=source.droppableId,sCardIndex=source.index;var dListId=destination.droppableId,dCardIndex=destination.index;var sList=kanbanLists.find(function(l){return l.id===sListId;});var dList=kanbanLists.find(function(l){return l.id===dListId;});if(sListId===dListId){// reorder cards in the list only if card's index changes\nif(sCardIndex!==dCardIndex){var sCardsUpdated=reorderCards(sList.cards,sCardIndex,dCardIndex);var listsUpdated=kanbanLists.map(function(l){return l.id===sListId?_objectSpread(_objectSpread({},l),{},{cards:sCardsUpdated}):l;});setKanbanLists(listsUpdated);}}else{var _moveCardFromList=moveCardFromList(sList,dList,sCardIndex,dCardIndex),_moveCardFromList2=_slicedToArray(_moveCardFromList,2),sListUpdated=_moveCardFromList2[0],dListUpdated=_moveCardFromList2[1];var _listsUpdated=kanbanLists.map(function(l){return l.id===sListId?sListUpdated:l.id===dListId?dListUpdated:l;});setKanbanLists(_listsUpdated);}if(cardToMove){setCardToMove(null);}};var removeCardsFromList=function removeCardsFromList(cards){var cardsGroupedByListId=cards.reduce(function(acc,card){var listId=card.listId,cardId=card.cardId;if(!acc[listId])acc[listId]=[cardId];else acc[listId].push(cardId);return acc;},{});var listsUpdated=kanbanLists.map(function(l){var cardsToDelete=cardsGroupedByListId[l.id];if(!cardsToDelete)return l;var cardsUpdated=l.cards.filter(function(c){return!cardsToDelete.includes(c.id);});return _objectSpread(_objectSpread({},l),{},{cards:cardsUpdated});});return listsUpdated;};var handleListDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(listId){var result,listsUpdated;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return SwalWithBootstrapButtons.fire({icon:\"error\",title:\"Confirm deletion\",text:\"Are you sure do you want to delete this list?\",showCancelButton:true,confirmButtonText:\"Yes\",cancelButtonText:\"Cancel\"});case 2:result=_context.sent;if(!result.isConfirmed){_context.next=8;break;}listsUpdated=kanbanLists.filter(function(l){return l.id!==listId;});setKanbanLists(listsUpdated);_context.next=8;return SwalWithBootstrapButtons.fire(\"Deleted\",\"The list has been deleted.\",\"success\");case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleListDelete(_x){return _ref2.apply(this,arguments);};}();var handleCardsDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var cards,cardsNr,textMessage,result,listsUpdated,confirmMessage,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cards=_args2.length>0&&_args2[0]!==undefined?_args2[0]:[];cardsNr=cards.length;textMessage=cardsNr===1?\"Are you sure do you want to delete this card?\":\"Are you sure do you want to delete these \".concat(cardsNr,\" cards?\");_context2.next=5;return SwalWithBootstrapButtons.fire({icon:\"error\",title:\"Confirm deletion\",text:textMessage,showCancelButton:true,confirmButtonText:\"Yes\",cancelButtonText:\"Cancel\"});case 5:result=_context2.sent;if(!result.isConfirmed){_context2.next=12;break;}listsUpdated=removeCardsFromList(cards);setKanbanLists(listsUpdated);confirmMessage=cardsNr===1?\"The card has been deleted.\":\"The cards have been deleted.\";_context2.next=12;return SwalWithBootstrapButtons.fire(\"Deleted\",confirmMessage,\"success\");case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function handleCardsDelete(){return _ref3.apply(this,arguments);};}();var handleArchiveCards=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var cards,cardsNr,textMessage,result,listsUpdated,confirmMessage,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cards=_args3.length>0&&_args3[0]!==undefined?_args3[0]:[];cardsNr=cards.length;textMessage=cardsNr===1?\"Are you sure do you want to archive this card?\":\"Are you sure do you want to archive these \".concat(cardsNr,\" cards?\");_context3.next=5;return SwalWithBootstrapButtons.fire({icon:\"question\",iconHtml:ArchiveIconHtml,title:\"Confirm archivation\",text:textMessage,showCancelButton:true,confirmButtonText:\"Yes\",cancelButtonText:\"Cancel\"});case 5:result=_context3.sent;if(!result.isConfirmed){_context3.next=13;break;}setCardToEdit(null);listsUpdated=removeCardsFromList(cards);setKanbanLists(listsUpdated);confirmMessage=cardsNr===1?\"The card has been archived.\":\"The cards have been archived.\";_context3.next=13;return SwalWithBootstrapButtons.fire('Archived',confirmMessage,'success');case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function handleArchiveCards(){return _ref4.apply(this,arguments);};}();var handleListTitleChange=function handleListTitleChange(_ref5){var id=_ref5.id,title=_ref5.title;var listsUpdated=kanbanLists.map(function(l){return l.id===id?_objectSpread(_objectSpread({},l),{},{title:title}):l;});setKanbanLists(listsUpdated);};var handleCardChange=function handleCardChange(props){var listId=props.listId,cardId=props.cardId,otherProps=_objectWithoutProperties(props,_excluded);var listsUpdated=kanbanLists.map(function(l){if(l.id!==listId)return l;var cards=l.cards.map(function(c){return c.id===cardId?_objectSpread(_objectSpread({},c),otherProps):c;});return _objectSpread(_objectSpread({},l),{},{cards:cards});});if(cardToEdit){setCardToEdit(_objectSpread(_objectSpread({},cardToEdit),otherProps));}setKanbanLists(listsUpdated);setCardToChangeMembers(null);};var createCardInListAtIndex=function createCardInListAtIndex(props){var listId=props.listId,cardIndex=props.cardIndex,otherProps=_objectWithoutProperties(props,_excluded2);var listsUpdated=kanbanLists.map(function(l){if(listId!==l.id)return l;var newCard=createCard(otherProps);l.cards.splice(cardIndex,0,newCard);return l;});return listsUpdated;};return/*#__PURE__*/React.createElement(React.Fragment,null,showCreateCardModal&&/*#__PURE__*/React.createElement(KanbanCreateModal,{show:showCreateCardModal,onHide:toggleCreateCardModal,onSubmit:handleCreateCard}),cardToEdit&&/*#__PURE__*/React.createElement(KanbanEditModal,Object.assign({show:true},cardToEdit,{onHide:function onHide(){return setCardToEdit(null);},onArchive:function onArchive(card){return handleArchiveCards([card]);},onMove:function onMove(card){return setCardToMove(card);},onEditMembers:function onEditMembers(card){return setCardToChangeMembers(card);},onEditLabels:function onEditLabels(card){return setCardToChangeLabels(card);},onChange:handleCardChange})),cardToChangeMembers&&/*#__PURE__*/React.createElement(KanbanEditMembersModal,Object.assign({show:true},cardToChangeMembers,{onHide:function onHide(){return setCardToChangeMembers(null);},onSubmit:handleCardChange})),cardToChangeLabels&&/*#__PURE__*/React.createElement(KanbanEditLabelsModal,Object.assign({show:true},cardToChangeLabels,{onHide:function onHide(){return setCardToChangeLabels(null);},onSubmit:handleCardChange})),cardToCopy&&/*#__PURE__*/React.createElement(KanbanCopyModal,Object.assign({show:true},cardToCopy,{lists:kanbanLists,onHide:function onHide(){return setCardToCopy(null);},onSubmit:handleCopyCard})),cardToMove&&/*#__PURE__*/React.createElement(KanbanMoveModal,Object.assign({show:true},cardToMove,{lists:kanbanLists,onHide:function onHide(){return setCardToMove(null);},onSubmit:handleDragEnd})),showCreateListModal&&/*#__PURE__*/React.createElement(KanbanCreateModal,{type:\"list\",modalTitle:\"Add a new list\",show:showCreateListModal,onHide:toggleCreateListModal,onSubmit:handleCreateList}),listToCopy&&/*#__PURE__*/React.createElement(KanbanCopyModal,Object.assign({show:true,type:\"list\"},listToCopy,{onHide:function onHide(){return setListToCopy(null);},onSubmit:handleCreateList})),listToMoveIndex!==null&&/*#__PURE__*/React.createElement(KanbanMoveModal,{show:true,type:\"list\",lists:kanbanLists,listIndex:listToMoveIndex,onHide:function onHide(){return setListToMoveIndex(null);},onSubmit:handleMoveList}),/*#__PURE__*/React.createElement(KanbanHeader,{onNewCard:toggleCreateCardModal,onArchive:handleArchiveCards,onDelete:handleCardsDelete}),/*#__PURE__*/React.createElement(Container,{fluid:true,className:\"kanban-container py-4 px-0\"},/*#__PURE__*/React.createElement(Row,{className:\"d-flex flex-nowrap\"},/*#__PURE__*/React.createElement(DragDropContext,{onDragEnd:handleDragEnd},kanbanLists.map(function(list,ind){var listId=list.id,cards=list.cards;return/*#__PURE__*/React.createElement(Droppable,{index:ind,droppableId:\"\".concat(listId),key:\"kanban-list-\".concat(listId)},function(provided){var listRef=provided.innerRef,placeholder=provided.placeholder,droppableProps=provided.droppableProps;return/*#__PURE__*/React.createElement(KanbanList,Object.assign({},list,{listRef:listRef,extraProps:droppableProps,onCardAdd:function onCardAdd(){return toggleCreateCardModal({listId:listId});},onListCopy:function onListCopy(){return setListToCopy(list);},onListMove:function onListMove(){return setListToMoveIndex(ind);},onListDelete:handleListDelete,onTitleChange:handleListTitleChange}),cards.map(function(card,index){var cardId=card.id;return/*#__PURE__*/React.createElement(Draggable,{index:index,draggableId:\"\".concat(cardId),key:\"kanban-card-\".concat(cardId)},function(provided,snapshot){var cardRef=provided.innerRef,draggableProps=provided.draggableProps,dragHandleProps=provided.dragHandleProps;return/*#__PURE__*/React.createElement(KanbanCard,Object.assign({},card,{cardRef:cardRef,style:getCardStyle(draggableProps.style,snapshot),extraProps:_objectSpread(_objectSpread({},draggableProps),dragHandleProps),onDelete:function onDelete(){return handleCardsDelete([{listId:listId,cardId:cardId}]);},onClick:function onClick(){return setCardToEdit(_objectSpread({listId:listId,index:index},card));},onEdit:function onEdit(){return setCardToEdit(_objectSpread({listId:listId,index:index},card));},onCopy:function onCopy(){return setCardToCopy(_objectSpread({listId:listId},card));},onMove:function onMove(){return setCardToMove({listId:listId,index:index});},onChangeMembers:function onChangeMembers(){return setCardToChangeMembers(_objectSpread({listId:listId},card));},onChangeLabels:function onChangeLabels(){return setCardToChangeLabels(_objectSpread({listId:listId},card));}}));});}),placeholder,/*#__PURE__*/React.createElement(Button,{variant:\"outline-gray-500\",onClick:function onClick(){return toggleCreateCardModal({listId:listId,cardIndex:cards.length});},className:\"d-inline-flex align-items-center justify-content-center dashed-outline new-card w-100\"},/*#__PURE__*/React.createElement(PlusIcon,{className:\"icon icon-xs me-2\"}),\" Add another card\"));});})),/*#__PURE__*/React.createElement(Col,{xs:12,lg:6,xl:4,xxl:3},/*#__PURE__*/React.createElement(\"div\",{className:\"d-grid\"},/*#__PURE__*/React.createElement(Button,{variant:\"outline-gray-500\",onClick:toggleCreateListModal,className:\"d-inline-flex align-items-center justify-content-center dashed-outline new-card w-100\"},/*#__PURE__*/React.createElement(PlusIcon,{className:\"icon icon-xs me-2\"}),\" Add another list\"))))));});","map":{"version":3,"sources":["/Users/oisinlyons/Downloads/volt-pro-react-v1.1.0/src/pages/Kanban.js"],"names":["React","useState","ReactDOMServer","Swal","withReactContent","DragDropContext","Droppable","Draggable","Col","Row","Button","Container","KanbanHeader","KanbanList","KanbanCard","KanbanCreateModal","KanbanEditModal","KanbanCopyModal","KanbanMoveModal","KanbanEditMembersModal","KanbanEditLabelsModal","KANBAN_LISTS","createCard","createList","ArchiveIcon","PlusIcon","ArchiveIconHtml","renderToString","SwalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","kanbanLists","setKanbanLists","createCardDefaultProps","listId","id","cardIndex","showCreateCardModal","setShowCreateCardModal","showCreateListModal","setShowCreateListModal","createCardProps","setCreateCardProps","cardToEdit","setCardToEdit","cardToCopy","setCardToCopy","cardToMove","setCardToMove","cardToChangeMembers","setCardToChangeMembers","cardToChangeLabels","setCardToChangeLabels","listToCopy","setListToCopy","listToMoveIndex","setListToMoveIndex","toggleCreateListModal","toggleCreateCardModal","props","getCardStyle","style","snapshot","isJustDragging","isDragging","isDropAnimating","transform","handleCreateCard","listsUpdated","createCardInListAtIndex","handleCopyCard","card","title","description","handleMoveList","source","destination","lists","splice","index","listRemoved","handleCreateList","newList","reorderCards","cards","startIndex","endIndex","cardRemoved","moveCardFromList","sList","dList","sIndex","dIndex","sCards","dCards","handleDragEnd","dragResult","sListId","droppableId","sCardIndex","dListId","dCardIndex","find","l","sCardsUpdated","map","sListUpdated","dListUpdated","removeCardsFromList","cardsGroupedByListId","reduce","acc","cardId","push","cardsToDelete","cardsUpdated","filter","c","includes","handleListDelete","fire","icon","text","showCancelButton","confirmButtonText","cancelButtonText","result","isConfirmed","handleCardsDelete","cardsNr","length","textMessage","confirmMessage","handleArchiveCards","iconHtml","handleListTitleChange","handleCardChange","otherProps","newCard","list","ind","provided","listRef","innerRef","placeholder","droppableProps","cardRef","draggableProps","dragHandleProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { Col, Row, Button, Container } from \"react-bootstrap\";\n\nimport KanbanHeader from \"components/KanbanHeader\";\nimport KanbanList from \"components/KanbanList\";\nimport KanbanCard from \"components/KanbanCard\";\nimport { KanbanCreateModal, KanbanEditModal, KanbanCopyModal, KanbanMoveModal, KanbanEditMembersModal, KanbanEditLabelsModal } from \"components/Modals\";\nimport KANBAN_LISTS, { createCard, createList } from \"data/kanban\";\nimport { ArchiveIcon, PlusIcon } from \"@heroicons/react/solid\";\n\nconst ArchiveIconHtml = ReactDOMServer.renderToString(\n  <ArchiveIcon className=\"h-50 w-auto\" />\n);\n\nconst SwalWithBootstrapButtons = withReactContent(Swal.mixin({\n  customClass: {\n    confirmButton: \"btn btn-primary me-3\",\n    cancelButton: \"btn btn-gray\"\n  },\n  buttonsStyling: false\n}));\n\nexport default () => {\n  const [kanbanLists, setKanbanLists] = useState(KANBAN_LISTS);\n  const createCardDefaultProps = { listId: kanbanLists[0].id, cardIndex: 0 };\n  const [showCreateCardModal, setShowCreateCardModal] = useState(false);\n  const [showCreateListModal, setShowCreateListModal] = useState(false);\n  const [createCardProps, setCreateCardProps] = useState(createCardDefaultProps);\n  const [cardToEdit, setCardToEdit] = useState(null);\n  const [cardToCopy, setCardToCopy] = useState(null);\n  const [cardToMove, setCardToMove] = useState(null);\n  const [cardToChangeMembers, setCardToChangeMembers] = useState(null);\n  const [cardToChangeLabels, setCardToChangeLabels] = useState(null);\n  const [listToCopy, setListToCopy] = useState(null);\n  const [listToMoveIndex, setListToMoveIndex] = useState(null);\n\n  const toggleCreateListModal = () => {\n    setShowCreateListModal(!showCreateListModal);\n  };\n\n  const toggleCreateCardModal = (props = {}) => {\n    setCreateCardProps({ ...createCardDefaultProps, ...props });\n    setShowCreateCardModal(!showCreateCardModal);\n  };\n\n  const getCardStyle = (style, snapshot) => {\n    const isJustDragging = snapshot.isDragging && !snapshot.isDropAnimating\n\n    if (!isJustDragging) {\n      return style;\n    }\n\n    return {\n      ...style,\n      transform: `${style.transform || \"\"} rotate(6deg)`\n    };\n  };\n\n  const handleCreateCard = (props = {}) => {\n    const listsUpdated = createCardInListAtIndex({ ...createCardProps, ...props });\n\n    toggleCreateCardModal();\n    setKanbanLists(listsUpdated);\n  };\n\n  const handleCopyCard = (card = {}) => {\n    const { listId, title, description, } = card;\n    const listsUpdated = createCardInListAtIndex({ listId, title, description });\n\n    setCardToCopy(null);\n    setKanbanLists(listsUpdated);\n  };\n\n  const handleMoveList = ({ source, destination }) => {\n    const lists = [...kanbanLists];\n    const [listRemoved] = lists.splice(source.index, 1);\n    lists.splice(destination.index, 0, listRemoved);\n\n    setKanbanLists(lists);\n    setListToMoveIndex(null);\n  };\n\n  const handleCreateList = (props) => {\n    const newList = createList(props);\n    const listsUpdated = [...kanbanLists, newList];\n\n    setShowCreateListModal(false);\n    setKanbanLists(listsUpdated);\n    setListToCopy(null);\n  };\n\n  const reorderCards = (cards = [], startIndex, endIndex) => {\n    const [cardRemoved] = cards.splice(startIndex, 1);\n    cards.splice(endIndex, 0, cardRemoved);\n\n    return cards;\n  };\n\n  const moveCardFromList = (sList, dList, sIndex, dIndex) => {\n    const sCards = [...sList.cards];\n    const dCards = [...dList.cards];\n\n    const [cardRemoved] = sCards.splice(sIndex, 1);\n    dCards.splice(dIndex, 0, cardRemoved);\n\n    return [\n      { ...sList, cards: sCards },\n      { ...dList, cards: dCards }\n    ];\n  };\n\n  const handleDragEnd = (dragResult) => {\n    const { source, destination } = dragResult;\n\n    //  dropped outside the list\n    if (!destination) {\n      return;\n    }\n\n    const { droppableId: sListId, index: sCardIndex } = source;\n    const { droppableId: dListId, index: dCardIndex } = destination;\n\n    const sList = kanbanLists.find(l => l.id === sListId);\n    const dList = kanbanLists.find(l => l.id === dListId);\n\n    if (sListId === dListId) {\n      // reorder cards in the list only if card's index changes\n      if (sCardIndex !== dCardIndex) {\n        const sCardsUpdated = reorderCards(sList.cards, sCardIndex, dCardIndex);\n        const listsUpdated = kanbanLists.map(l => l.id === sListId ? { ...l, cards: sCardsUpdated } : l);\n        setKanbanLists(listsUpdated);\n      }\n    } else {\n      const [sListUpdated, dListUpdated] = moveCardFromList(sList, dList, sCardIndex, dCardIndex);\n      const listsUpdated = kanbanLists.map(l => l.id === sListId ? sListUpdated : l.id === dListId ? dListUpdated : l);\n      setKanbanLists(listsUpdated);\n    }\n\n    if (cardToMove) {\n      setCardToMove(null);\n    }\n  };\n\n  const removeCardsFromList = (cards) => {\n    const cardsGroupedByListId = cards.reduce((acc, card) => {\n      const { listId, cardId } = card;\n\n      if (!acc[listId]) acc[listId] = [cardId];\n      else acc[listId].push(cardId);\n\n      return acc\n    }, {});\n\n    const listsUpdated = kanbanLists.map(l => {\n      const cardsToDelete = cardsGroupedByListId[l.id];\n      if (!cardsToDelete) return l;\n\n      const cardsUpdated = l.cards.filter(c => !cardsToDelete.includes(c.id));\n      return ({ ...l, cards: cardsUpdated });\n    });\n\n    return listsUpdated;\n  };\n\n  const handleListDelete = async (listId) => {\n    const result = await SwalWithBootstrapButtons.fire({\n      icon: \"error\",\n      title: \"Confirm deletion\",\n      text: \"Are you sure do you want to delete this list?\",\n      showCancelButton: true,\n      confirmButtonText: \"Yes\",\n      cancelButtonText: \"Cancel\"\n    });\n\n    if (result.isConfirmed) {\n      const listsUpdated = kanbanLists.filter(l => l.id !== listId);\n      setKanbanLists(listsUpdated);\n\n      await SwalWithBootstrapButtons.fire(\"Deleted\", \"The list has been deleted.\", \"success\");\n    }\n  };\n\n  const handleCardsDelete = async (cards = []) => {\n    const cardsNr = cards.length;\n    const textMessage = cardsNr === 1\n      ? \"Are you sure do you want to delete this card?\"\n      : `Are you sure do you want to delete these ${cardsNr} cards?`;\n\n    const result = await SwalWithBootstrapButtons.fire({\n      icon: \"error\",\n      title: \"Confirm deletion\",\n      text: textMessage,\n      showCancelButton: true,\n      confirmButtonText: \"Yes\",\n      cancelButtonText: \"Cancel\"\n    });\n\n    if (result.isConfirmed) {\n      const listsUpdated = removeCardsFromList(cards);\n      setKanbanLists(listsUpdated);\n\n      const confirmMessage = cardsNr === 1 ? \"The card has been deleted.\" : \"The cards have been deleted.\";\n      await SwalWithBootstrapButtons.fire(\"Deleted\", confirmMessage, \"success\");\n    }\n  };\n\n  const handleArchiveCards = async (cards = []) => {\n    const cardsNr = cards.length;\n    const textMessage = cardsNr === 1\n      ? \"Are you sure do you want to archive this card?\"\n      : `Are you sure do you want to archive these ${cardsNr} cards?`;\n\n    const result = await SwalWithBootstrapButtons.fire({\n      icon: \"question\",\n      iconHtml: ArchiveIconHtml,\n      title: \"Confirm archivation\",\n      text: textMessage,\n      showCancelButton: true,\n      confirmButtonText: \"Yes\",\n      cancelButtonText: \"Cancel\"\n    });\n\n    if (result.isConfirmed) {\n      setCardToEdit(null);\n      const listsUpdated = removeCardsFromList(cards);\n      setKanbanLists(listsUpdated);\n\n      const confirmMessage = cardsNr === 1 ? \"The card has been archived.\" : \"The cards have been archived.\";\n      await SwalWithBootstrapButtons.fire('Archived', confirmMessage, 'success');\n    }\n  };\n\n  const handleListTitleChange = ({ id, title }) => {\n    const listsUpdated = kanbanLists.map(l => l.id === id ? ({ ...l, title }) : l);\n    setKanbanLists(listsUpdated);\n  };\n\n  const handleCardChange = (props) => {\n    const { listId, cardId, ...otherProps } = props;\n\n    const listsUpdated = kanbanLists.map(l => {\n      if (l.id !== listId) return l;\n\n      const cards = l.cards.map(c => c.id === cardId ? ({ ...c, ...otherProps }) : c);\n      return { ...l, cards };\n    });\n\n    if (cardToEdit) {\n      setCardToEdit({ ...cardToEdit, ...otherProps });\n    }\n\n    setKanbanLists(listsUpdated);\n    setCardToChangeMembers(null);\n  };\n\n  const createCardInListAtIndex = (props) => {\n    const { listId, cardIndex, ...otherProps } = props;\n\n    const listsUpdated = kanbanLists.map(l => {\n      if (listId !== l.id) return l;\n\n      const newCard = createCard(otherProps);\n      l.cards.splice(cardIndex, 0, newCard);\n\n      return l;\n    });\n\n    return listsUpdated;\n  };\n\n  return (\n    <>\n      {showCreateCardModal && (\n        <KanbanCreateModal\n          show={showCreateCardModal}\n          onHide={toggleCreateCardModal}\n          onSubmit={handleCreateCard}\n        />\n      )}\n\n      {cardToEdit && (\n        <KanbanEditModal\n          show={true}\n          {...cardToEdit}\n          onHide={() => setCardToEdit(null)}\n          onArchive={(card) => handleArchiveCards([card])}\n          onMove={(card) => setCardToMove(card)}\n          onEditMembers={(card) => setCardToChangeMembers(card)}\n          onEditLabels={(card) => setCardToChangeLabels(card)}\n          onChange={handleCardChange}\n        />\n      )}\n\n      {cardToChangeMembers && (\n        <KanbanEditMembersModal\n          show={true}\n          {...cardToChangeMembers}\n          onHide={() => setCardToChangeMembers(null)}\n          onSubmit={handleCardChange}\n        />\n      )}\n\n      {cardToChangeLabels && (\n        <KanbanEditLabelsModal\n          show={true}\n          {...cardToChangeLabels}\n          onHide={() => setCardToChangeLabels(null)}\n          onSubmit={handleCardChange}\n        />\n      )}\n\n      {cardToCopy && (\n        <KanbanCopyModal\n          show={true}\n          {...cardToCopy}\n          lists={kanbanLists}\n          onHide={() => setCardToCopy(null)}\n          onSubmit={handleCopyCard}\n        />\n      )}\n\n      {cardToMove && (\n        <KanbanMoveModal\n          show={true}\n          {...cardToMove}\n          lists={kanbanLists}\n          onHide={() => setCardToMove(null)}\n          onSubmit={handleDragEnd}\n        />\n      )}\n\n      {showCreateListModal && (\n        <KanbanCreateModal\n          type=\"list\"\n          modalTitle=\"Add a new list\"\n          show={showCreateListModal}\n          onHide={toggleCreateListModal}\n          onSubmit={handleCreateList}\n        />\n      )}\n\n      {listToCopy && (\n        <KanbanCopyModal\n          show={true}\n          type=\"list\"\n          {...listToCopy}\n          onHide={() => setListToCopy(null)}\n          onSubmit={handleCreateList}\n        />\n      )}\n\n      {listToMoveIndex !== null && (\n        <KanbanMoveModal\n          show={true}\n          type=\"list\"\n          lists={kanbanLists}\n          listIndex={listToMoveIndex}\n          onHide={() => setListToMoveIndex(null)}\n          onSubmit={handleMoveList}\n        />\n      )}\n\n      <KanbanHeader\n        onNewCard={toggleCreateCardModal}\n        onArchive={handleArchiveCards}\n        onDelete={handleCardsDelete}\n      />\n\n      <Container fluid className=\"kanban-container py-4 px-0\">\n        <Row className=\"d-flex flex-nowrap\">\n          <DragDropContext onDragEnd={handleDragEnd}>\n            {kanbanLists.map((list, ind) => {\n              const { id: listId, cards } = list;\n\n              return (\n                <Droppable index={ind} droppableId={`${listId}`} key={`kanban-list-${listId}`}>\n                  {provided => {\n                    const { innerRef: listRef, placeholder, droppableProps } = provided;\n\n                    return (\n                      <KanbanList\n                        {...list}\n                        listRef={listRef}\n                        extraProps={droppableProps}\n                        onCardAdd={() => toggleCreateCardModal({ listId })}\n                        onListCopy={() => setListToCopy(list)}\n                        onListMove={() => setListToMoveIndex(ind)}\n                        onListDelete={handleListDelete}\n                        onTitleChange={handleListTitleChange}\n                      >\n                        {cards.map((card, index) => {\n                          const { id: cardId } = card;\n\n                          return (\n                            <Draggable index={index} draggableId={`${cardId}`} key={`kanban-card-${cardId}`}>\n                              {(provided, snapshot) => {\n                                const { innerRef: cardRef, draggableProps, dragHandleProps } = provided;\n\n                                return (\n                                  <KanbanCard\n                                    {...card}\n                                    cardRef={cardRef}\n                                    style={getCardStyle(draggableProps.style, snapshot)}\n                                    extraProps={{ ...draggableProps, ...dragHandleProps }}\n                                    onDelete={() => handleCardsDelete([{ listId, cardId }])}\n                                    onClick={() => setCardToEdit({ listId, index, ...card })}\n                                    onEdit={() => setCardToEdit({ listId, index, ...card })}\n                                    onCopy={() => setCardToCopy({ listId, ...card })}\n                                    onMove={() => setCardToMove({ listId, index })}\n                                    onChangeMembers={() => setCardToChangeMembers({ listId, ...card })}\n                                    onChangeLabels={() => setCardToChangeLabels({ listId, ...card })}\n                                  />\n                                );\n                              }}\n                            </Draggable>\n                          )\n                        })}\n\n                        {placeholder}\n                        <Button\n                          variant=\"outline-gray-500\"\n                          onClick={() => toggleCreateCardModal({ listId, cardIndex: cards.length })}\n                          className=\"d-inline-flex align-items-center justify-content-center dashed-outline new-card w-100\"\n                        >\n                          <PlusIcon className=\"icon icon-xs me-2\" /> Add another card\n                        </Button>\n                      </KanbanList>\n                    );\n                  }}\n                </Droppable>\n              )\n            })}\n          </DragDropContext>\n\n          <Col xs={12} lg={6} xl={4} xxl={3}>\n            <div className=\"d-grid\">\n              <Button\n                variant=\"outline-gray-500\"\n                onClick={toggleCreateListModal}\n                className=\"d-inline-flex align-items-center justify-content-center dashed-outline new-card w-100\"\n              >\n                <PlusIcon className=\"icon icon-xs me-2\" /> Add another list\n              </Button>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}